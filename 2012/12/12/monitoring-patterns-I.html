<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="revisit-after" content="30 days"><meta name="robots" content="index, follow"><title>Monitoring Applications wit... | monitoring | nagios | nagira | Dmytro Kovalov</title><meta name="description" content="Nagira — RESTful API for Nagios simplifies integration of distributed Nagios systems
"><meta name="keywords" content="monitoring,nagios,nagira,RESTful API,ruby"/><meta name="revised" content="Dmytro Kovalov,  2012/12/12"/><meta name="author" content="Dmytro Kovalov"/><link rel="icon" href="/images/favicon.ico"><link href='http://fonts.googleapis.com/css?family=Noto+Sans&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Seymour+One&subset=latin,cyrillic' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Comfortaa&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Lobster&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Inconsolata:700' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/app-4a876ce717d8164662b680931dc832fc.css"> <script src="/assets/app-b80c4942bb62b4e63380a8693c39923c.js"></script><meta name="thefeedbackbutton" content="Github:ed4d541b3268b2dc5250684b57864d"> <script src="http://www.thefeedbackbutton.com/button.js"></script><style>#TheFeedbackButton{top:270px !important}</style><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-33505287-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><meta name="google-translate-customization" content="e5305daecdf84461-c504f9bf5024d6b1-gef663547868bd15e-10"></meta></head><body><div id="fb-root"></div> <script>!function(e,t,n){var c,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(c=e.createElement(t),c.id=n,c.src="//connect.facebook.net/en_US/all.js#xfbml=1",o.parentNode.insertBefore(c,o))}(document,"script","facebook-jssdk")</script> <script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><a href="https://github.com/dmytro/nagira"> <img id="ribbon" src="http://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"/></a><div id="tiki-top"><table style="margin:0;padding:0" cellspacing="0" cellpadding="0" width="100%" columns="3"><tbody><tr style="padding:0;margin:0"><td style="width:120px;background-color:#D9A005;color:#8b0b04;font-wight:bold;text-align:right;padding:1em;padding-top:2em;border:0;border-right:10px solid #000"><p class="motto plus">Лупайте сю скалу...</p><p class='motto'>Іван Франко</p></td><td style="border:0"> <a href="http://yarylo.sytes.net/"><img align="right" border="0" src="/images/yarylo.png"></a> <br clear="all"><div id="top_bar_title"> <a href="http://yarylo.sytes.net/dmytro" style="color:#8B0B04">Уроки пані Маєш</a></div><div style="float:left"><div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div><div align="right" class="g-plusone" data-size="medium"></div></div><div style="float:right;padding:5px"><div ><img height="14" width="14" src="/images/feed-icon-14x14.png"> <a href="rss.xml">RSS</a> | <a href="atom.xml">Atom</a></div></div></td><td style="border:0;border-left:10px solid #000;width:200px;background-color:#8B0B04"><p class="editdate" style="font-size:small;color:#D9A005;margin:5px;margin-top:100px;margin-right:80px"> 01 November 2013</p></td></tr></tbody></table></div><div id="tiki-mid"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td id="leftcolumn"><p id="preamble"><a class="top" href="/"><h1>TOP »</h1></a><p><div id='tag_cloud'> <a href="/tags.html#mac" title="mac" rel="7">mac</a> <a href="/tags.html#history" title="history" rel="7">history</a> <a href="/tags.html#solaris" title="solaris" rel="1">solaris</a> <a href="/tags.html#email" title="email" rel="2">email</a> <a href="/tags.html#sendmail" title="sendmail" rel="1">sendmail</a> <a href="/tags.html#cli" title="cli" rel="7">cli</a> <a href="/tags.html#nfs" title="nfs" rel="1">nfs</a> <a href="/tags.html#configuration" title="configuration" rel="12">configuration</a> <a href="/tags.html#interesting" title="interesting" rel="1">interesting</a> <a href="/tags.html#linux" title="linux" rel="6">linux</a> <a href="/tags.html#debian" title="debian" rel="4">debian</a> <a href="/tags.html#xwindow" title="xwindow" rel="1">xwindow</a> <a href="/tags.html#css" title="css" rel="3">css</a> <a href="/tags.html#disk" title="disk" rel="1">disk</a> <a href="/tags.html#books" title="books" rel="1">books</a> <a href="/tags.html#fun" title="fun" rel="1">fun</a> <a href="/tags.html#cobbler" title="cobbler" rel="1">cobbler</a> <a href="/tags.html#installation" title="installation" rel="3">installation</a> <a href="/tags.html#troubleshooting" title="troubleshooting" rel="2">troubleshooting</a> <a href="/tags.html#ntp" title="ntp" rel="1">ntp</a> <a href="/tags.html#environment" title="environment" rel="3">environment</a> <a href="/tags.html#perl" title="perl" rel="1">perl</a> <a href="/tags.html#request tracker" title="request tracker" rel="2">request tracker</a> <a href="/tags.html#ruby" title="ruby" rel="9">ruby</a> <a href="/tags.html#development" title="development" rel="3">development</a> <a href="/tags.html#gem" title="gem" rel="1">gem</a> <a href="/tags.html#nagios" title="nagios" rel="4">nagios</a> <a href="/tags.html#monitoring" title="monitoring" rel="4">monitoring</a> <a href="/tags.html#nagira" title="nagira" rel="4">nagira</a> <a href="/tags.html#ssh" title="ssh" rel="1">ssh</a> <a href="/tags.html#tmux" title="tmux" rel="2">tmux</a> <a href="/tags.html#tips" title="tips" rel="8">tips</a> <a href="/tags.html#unix" title="unix" rel="3">unix</a> <a href="/tags.html#shell" title="shell" rel="3">shell</a> <a href="/tags.html#zsh" title="zsh" rel="1">zsh</a> <a href="/tags.html#prompt" title="prompt" rel="1">prompt</a> <a href="/tags.html#RESTful API" title="RESTful API" rel="3">RESTful API</a> <a href="/tags.html#blog" title="blog" rel="2">blog</a> <a href="/tags.html#github" title="github" rel="2">github</a> <a href="/tags.html#jekyll" title="jekyll" rel="2">jekyll</a> <a href="/tags.html#chef" title="chef" rel="1">chef</a> <a href="/tags.html#capistrano" title="capistrano" rel="1">capistrano</a> <a href="/tags.html#deployment" title="deployment" rel="1">deployment</a> <a href="/tags.html#Japan" title="Japan" rel="13">Japan</a> <a href="/tags.html#Ukrainian" title="Ukrainian" rel="13">Ukrainian</a> <a href="/tags.html#travel" title="travel" rel="13">travel</a> <a href="/tags.html#culture" title="culture" rel="4">culture</a></div></p><h1 class="even">Selected projects <a style="float:right" href="/github.html"><b>See all » </b></a></h1><a href="/aws-deploy.html">AWS Deploy</a><a href="/banalize.html">Banalize: Bash static code analyzer</a><a href="/dbi-report-excel.html">DBIx::Report::Excel</a><a href="/dotfiles/index.html">Shell settings, AKA dotfiles</a><a href="/github_keys/index.html">Github keys</a><a href="/nagios_couchbase.html">Nagios Monitoring for Couchbase server</a><a href="/nagira/index.html">Nagira: RESTful API for Nagios</a><a href="/rfb.html">Ready For Business Automation system</a><a href="/rspec_normalized_hash/index.html">RSpec tests for Normalized Hash</a><a href="/Web-iPhoto/index.html">Web iPhoto</a><h1>Blog <a style="float:right" href="/posts.html"><b>All posts » </b></a></h1> <a href="/series/Lito_na_pivnochi_YAponiyi.html"> Series: Літо на півночі Японії</a><a href="/2013/08/13/more_about_jekyll.html">Github & Jekyll: More experience with Jekyll and setup changes</a><a href="/2013/05/21/easy_spawn_new_hosts_with_capistrano.html">Build new hosts with Capistrano and Chef </a><a href="/2013/05/15/custom_css_for_rt4.html">Request Tracker: More about custom CSS for RT4</a><a href="/2013/03/18/ruby_2_test_drive.html">Ruby 2 test drive </a><a href="/2013/03/15/nagira_v0.2.5_release.html">Nagira v0.2.5 release </a><a href="/2013/03/13/its_unix_my_dear_watson.html">It's UNIX my dear Watson </a><a href="/2013/01/08/memorizable_password_generation.html">Memorizable password generation </a><a href="/2012/12/22/jekyll-tags-pygmnents.html">Github & Jekyll: New tricks and questions with Jekyll</a><a href="/2012/12/14/monitoring-patterns-II.html">Monitoring patterns fo...: Nagios Checks Aggregation</a><a href="/2012/12/12/monitoring-patterns-I.html">Monitoring patterns fo...: Monitoring Applications with RESTful API</a><a href="/2012/11/27/unobtrusive-git-prompt.html">Unobtrusive Git prompt for ZSH </a><h1 class="even">Slides <a style="float:right" href="/presentations"><b>See all » </b></a></h1> <a href=/ presentations/ nagira_tlug. html>Nagira @TLUG, 2012</a><a href=/ presentations/ rspec_and_guard. html>Rspec and Guard</a><h1>About</h1><a href="http://uk.wikipedia.org/wiki/%D0%AF%D1%80%D0%B8%D0%BB%D0%BE">Ярило, Yarylo, Jarilo</a> <a href="http://github.com/dmytro"> @ github</a> <a href="http://search.cpan.org/~dmytro"> @ CPAN</a> <a href="http://tinyurl.com/7j89dhl"> Dmytro (CV)</a><p><p></td><td id="centercolumn"><div class="wikitext"><div class="titlebar"> Monitoring Applications with RESTful API</div><div class="download"> <a href="https://github.com/dmytro/nagira/zipball/master"><img border="0" src="https://github.com/images/modules/download/zip.png"></a><a href="https://github.com/dmytro/nagira/tarball/master"><img border="0" src="https://github.com/images/modules/download/tar.png"></a></div><div id="related"> <script>function createTOC(a,t){var e=0,h=$("<ul id='bookmarksList'>");$("#content").children(a).each(function(){$(this).html("<a name='bookmark"+e+"'></a>"+$(this).html()),h.append($("<li class='"+this.nodeName+"'><a href='#bookmark"+e++ +"'>"+$(this).text()+"</a></li>"))}),$("#"+t).append(h)}$("document").ready(function(){createTOC("h1,h2,h3,h4,h5,h6","TOC   ")})</script><style>#TOC.bookmarkList li{list-style-type:none}li:first-child{text-indent:0}.H1,.H2,.H3,.H4,.H5,.H6{display:block}.H1{text-indent:0;font-size:100%}.H2{text-indent:2ex;font-size:90%}.H3{text-indent:4ex;font-size:80%}.H4{text-indent:6ex;font-size:70%}.H5{text-indent:8ex;font-size:60%}.H6{text-indent:10ex;font-size:50%}</style><strong id="toc_title">Table Of Contents</strong><div id="TOC"></div><h3>Related Posts</h3><ul class="posts"><li class="blog-toc-item"><a href="/2013/03/15/nagira_v0.2.5_release.html">Nagira v0.2.5 release</a></li><li class="blog-toc-item"><a href="/2012/12/14/monitoring-patterns-II.html">Nagios Checks Aggregation</a></li><li class="blog-toc-item"><a href="/2012/10/11/nagira-concert.html">What's in the name -- Nagira?</a></li><li class="blog-toc-item"><a href="/2013/05/21/easy_spawn_new_hosts_with_capistrano.html">Build new hosts with Capistrano and Chef</a></li><li class="blog-toc-item"><a href="/2013/03/18/ruby_2_test_drive.html">Ruby 2 test drive</a></li></ul><p><h3>Tags</h3>: <a href="/tags.html#monitoring">monitoring</a> : <a href="/tags.html#nagios">nagios</a> : <a href="/tags.html#nagira">nagira</a> : <a href="/tags.html#RESTful API">RESTful API</a> : <a href="/tags.html#ruby">ruby</a> :</p><div id="series"><hr class="thin"><div class="seriesNote"><div class="italic"> This article is Part 1 in a 2-Part Series.</div> <a href="/series/Monitoring_patterns_for_Nagios_with_Nagira_API.html"><h3>Monitoring patterns for Nagios with Nagira API (See all »)</h3></a><div class="small" style="display:block">Part 1 - This article</div><div class="small" style="display:block">Part 2 - <a href="/2012/12/14/monitoring-patterns-II.html">Nagios Checks Aggregation</a></div></div></div></div><div id="content"><p class='italic'><b>Summary:</b> Reviewed several patterns for integrated monitoring with Nagios and Nagira . Nagira — RESTful API for Nagios simplifies integration of distributed Nagios systems . This is first installation of the series.</p><p>Nagios is great system. Many features in Nagios are superior to many open source and commercial monitoring system. Adding HTTP based API for Nagios opens new possibilities for simpler architectures of distributed monitoring with Nagios.</p><p><a href="http://dmytro.github.com/nagira">Nagira API</a> provides access to system status, objects configuration in Nagios as well as provides an interface for submitting passive check results using the same HTTP protocol. This opens wider capabilities for monitoring system architecture modularity and integration.</p><h1>Applications with HTTP RESTful API</h1><p>Here I want to review one of the simplest patterns with Nagira - monitoring applications that have built-in HTTP API (RESTful API in our case). This pattern was implemented recently in new project <a href="/NagiosForCouchbase">Nagios For Couchbase</a>. Similar approach can be adopted for any kind of application, that provides access to application metrics via HTTP API.</p><h1>Nagios For Couchbase</h1><p><a href="http://couchbase.com" title="Couchbase">Couchbase</a> is advanced memory based NoSQL key-value database. It has its own management RESTful API and API for data access. The API provides access to most if not all of the Couchbase operational metrics. Couchbase also has nice web console with multiple graphs displaying server metrics in real time. Actually web user interface in Couchbase is implemented as <a href="http://jquery.com/" title="jQuery">jQuery</a> interface built directly on top of JSON RESTful API.</p><p>Given Couchbase API combined with <a href="http://dmytro.github.com/nagira">Nagira API</a>, setting a monitoring system becomes a simple task. Architecture of such setup is presented on the diagram below.</p><h2>System Architecture</h2><ol><li>Script connects to Couchbase API and retrieves server metrics as JSON data object (via HTTP GET request)</li><li>Script process data and</li><li>Sends data to Nagira API (HTTP PUT)</li><li>Nagira writes to <a href="http://nagios.sourceforge.net/docs/3_0/extcommands.html">Nagios external command</a> interface</li><li>Results are then processed internally by Nagios</li></ol><p><img src="/images/2012-12-12-nagios_for_couchbase.png" alt="Nagios For Couchbase Diagram"/></p><p>Advantages of this architecture as far as one can see are:</p><ul><li>Since only HTTP protocol involved for both retrieving data and registering results, script that runs the checks, can be in any location — on Couchbase server, or on Nagios server or any other host on the network.</li><li>List of couchbase servers can be retrieved from Nagios configuration itself, if corresponding host-group is configured (for example <code>'hostgroup couchbase'</code>). Configuration becomes completely data driven and requires no additional changes when adding/removing Couchbase servers to the pool.</li><li>JSON object containing multiple metrics can be read as with single HTTP GET request to Couchbase server, status for multiple checks can be updated similarly with single HTTP PUT to Nagira API, which produces multiple writes to Nagios command file. This reduces load on Nagios server, which is not dealing with scheduling and executing checks.</li></ul><h2>Executing Checks</h2><p>How actually checks are performed will be reviewed in some of the following posts. Please come again!</p><h2> Author</h2><p> Dmytro Kovalov (<a href="mailto:dmytro.kovalov@gmail.com">dmytro.kovalov@gmail.com</a>)</p><h2>Download</h2><p> Download nagira in either <a href="https://github.com/dmytro/nagira/zipball/master">zip</a> or <a href="https://github.com/dmytro/nagira/tarball/master">tar formats.</a></p><p>You can also clone nagira with <a href="http://git-scm.com">Git</a> by running: <pre>

     $ git clone git://github.com/dmytro/nagira
</pre>Go to <a href="http://github.com/dmytro/nagira">Github repository »</a></p></div><hr><div id="blog-toc"><div class="toc-title">More Posts</div> <span class="blog-toc-item"><a href="/2013/08/13/more_about_jekyll.html">More experience with Jekyll and setup changes</a></span>| <span class="blog-toc-item"><a href="/2013/08/01/back_home.html">День останній: два роки після цунамі</a></span>| <span class="blog-toc-item"><a href="/2013/07/31/ryusendo.html">Джерело Дракона, Рюсендо</a></span>| <span class="blog-toc-item"><a href="/2013/07/31/hachimantai.html">День десятий: вулкани і болота Хачімантаю</a></span>| <span class="blog-toc-item"><a href="/2013/07/30/tsuruno_onsen.html">Екстремальна екзотика в Цуруно онсен</a></span>| <span class="blog-toc-item"><a href="/2013/07/29/day_8_tazawako.html">День восьмий: Найглибше озеро Японії</a></span>| <span class="blog-toc-item"><a href="/2013/07/29/day_4_chusonji.html">День четвертий: багато буддистських святинь</a></span>| <span class="blog-toc-item"><a href="/2013/07/25/day_5to7_tokoton_yama_IV.html">Токотон-яма (IV). Пекло.</a></span>| <span class="blog-toc-item"><a href="/2013/07/25/day_5to7_tokoton_yama_III.html">Токотон-яма (III). Каньйон з гейзерами.</a></span>| <span class="blog-toc-item"><a href="/2013/07/25/day_5to7_tokoton_yama_II.html">Автокемпінг Токотон-яма (II)</a></span>| <span class="blog-toc-item"><a href="/2013/07/25/day_5to7_tokoton_yama_I.html">Три дні в Токотон-яма (I). Сукава онсен.</a></span>| <span class="blog-toc-item"><a href="/2013/07/24/day_three_yamadera.html">День третій: Окама і Ямадера</a></span>| <span class="blog-toc-item"><a href="/2013/07/23/druhyi_den.html">Другий день</a></span>| <span class="blog-toc-item"><a href="/2013/07/22/pershyi_den.html">День перший: Фукушіма, рухаємося на північ.</a></span>| <span class="blog-toc-item"><a href="/2013/05/21/easy_spawn_new_hosts_with_capistrano.html">Build new hosts with Capistrano and Chef</a></span>| <span class="blog-toc-item"><a href="/2013/05/15/custom_css_for_rt4.html">More about custom CSS for RT4</a></span>| <span class="blog-toc-item"><a href="/2013/03/18/ruby_2_test_drive.html">Ruby 2 test drive</a></span>| <span class="blog-toc-item"><a href="/2013/03/15/nagira_v0.2.5_release.html">Nagira v0.2.5 release</a></span>| <span class="blog-toc-item"><a href="/2013/03/13/its_unix_my_dear_watson.html">It's UNIX my dear Watson</a></span>| <span class="blog-toc-item"><a href="/2013/01/08/memorizable_password_generation.html">Memorizable password generation</a></span>|</div></table><div id="tiki-bot"><table style="border-:0;border-top:10px solid #000;margin:0;padding:0" cellspacing="0" cellpadding="0" width="100%" columns="2"><tbody><tr style="padding:0;margin:0"><td style="width:80%;background-color:#052D6C;color:#8b0b04;font-style:italic;font-wight:bold;text-align:right;border:0"> <br clear="all"><br clear="all"><br clear="all"><br clear="all"></td><td style="border:0;border-left:10px solid #000;width:120px;padding:5px"> <a class="address" href="mailto:dmytro.kovalov@gmail.com">дмитро ковальов</a></br> <a class="address" href="https://dmytro.github.com/">dmytro @ github </a><br> <a class="address" href="http://dmytro.sytes.net">dmytro.sytes.net</a><br></td></tr></tbody></table></div> <script>$("#content table tr:even").attr("class","even")</script></body></html>