<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nagira
  
    &mdash; Documentation by YARD 0.8.1
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (N)</a> &raquo;
    
    
    <span class="title">Nagira</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nagira
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Sinatra::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Sinatra::Base</li>
          
            <li class="next">Nagira</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app.rb<span class="defines">,<br />
  lib/nagira.rb,<br /> app/routes/put.rb,<br /> app/routes/put/status.rb,<br /> app/routes/get/status.rb,<br /> app/routes/get/config.rb,<br /> app/routes/get/objects.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Main class of Nagira application implementing RESTful API for Nagios.</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="VERSION-constant" class="">VERSION =
          
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/../version.txt</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span></pre></dd>
      
        <dt id="GITHUB-constant" class="">GITHUB =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://dmytro.github.com/nagira/</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#api-instance_method" title="#api (instance method)">- (Object) <strong>api</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all routes that Nagira provides.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_instance_data-instance_method" title="#before (instance method)">- (Object) <strong>before</strong>(&quot;clear data&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear values onf instance variables before start.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_jsonp_callback-instance_method" title="#before (instance method)">- (Object) <strong>before</strong>('find callback name') </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Detects if request is using jQuery JSON-P and sets @callback variable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_1_object-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(&quot;/_objects/:type/:name&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get single Nagios object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_api-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(/_api)) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provide information about API routes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_config-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(&quot;/_config&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get Nagios configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_object_type-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(&quot;/_objects/:type&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all objects of type :type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_objects-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(&quot;/_objects&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get full list of Nagios objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_slash-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(/)) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns application information: name, version, github repository.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_status-instance_method" title="#get_status (instance method)">- (Object) <strong>get_status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>All hosts status.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_status_hostname-instance_method" title="#get_status_hostname (instance method)">- (Object) <strong>get_status_hostname</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hoststatus for single host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_status_hostname_services-instance_method" title="#get_status_hostname_services (instance method)">- (Object) <strong>get_status_hostname_services</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>All services for single host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_status_hostname_services_service_name-instance_method" title="#get_status_hostname_services_service_name (instance method)">- (Object) <strong>get_status_hostname_services_service_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Full or short status information for single service on single host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object_not_found-instance_method" title="#after (instance method)">- (Object) <strong>after</strong>(&quot;Object not found or bad request&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If result-set of object/status search is empty return HTTP 404 .</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_input_data-instance_method" title="#before (instance method)">- (Array) <strong>before</strong>(&quot;Parse PUT request body&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Process the data before on each HTTP request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_nagios_files-instance_method" title="#before (instance method)">- (Object) <strong>before</strong>(&quot;Parse Nagios files&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parse nagios files.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put__host_status_host_name-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(&quot;/_host_status/:host_name&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Same as /_status/:host_name (Not implemented).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_status-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(&quot;/_status&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Submit JSON Hash for multiple services,  on multiple hosts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_status_as_http_parms-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(/_status/:host_name/_services/:service_description/_return_code/:return_code/_plugin_output/:plugin_output) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update single service status on a single host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_status_host_name-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(&quot;/_status/:host_name&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update hoststatus information only for the given host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_jsonp_data-instance_method" title="#after (instance method)">- (Object) <strong>after</strong>(&quot;Return formatted data&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If it's a JSON-P request, return its data with prepended @callback function
name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#strip_extensions-instance_method" title="#before (instance method)">- (Object) <strong>before</strong>(&quot;detect format&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Detect and strip output format extension.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#strip_output_type-instance_method" title="#before (instance method)">- (Object) <strong>before</strong>('detect output mode') </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Detect output mode modifier.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_host_status-instance_method" title="#update_host_status (instance method)">- (Object) <strong>update_host_status</strong>(params) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Small helper to submit data to ::Nagios::ExternalCommands object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_service_status-instance_method" title="#update_service_status (instance method)">- (Object) <strong>update_service_status</strong>(params) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Small helper to submit data to ::Nagios::ExternalCommands object.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="api-instance_method">
  
    - (<tt>Object</tt>) <strong>api</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all routes that Nagira provides.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nagira.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_api'>api</span> 
  <span class='id identifier rubyid_api'>api</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='rbrace'>}</span>
  
  <span class='id identifier rubyid_param_regex'>param_regex</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\(\[\^\\\\\/\?\#\]\+\)</span><span class='tstring_end'>'</span></span>
  <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
    <span class='id identifier rubyid_api'>api</span><span class='lbracket'>[</span><span class='id identifier rubyid_method'>method</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='lbracket'>[</span><span class='id identifier rubyid_method'>method</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span>
      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='lbracket'>[</span><span class='int'>3</span><span class='op'>..</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_r'>r</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_parm'>parm</span><span class='op'>|</span>
        <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='id identifier rubyid_param_regex'>param_regex</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parm'>parm</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_api'>api</span><span class='lbracket'>[</span><span class='id identifier rubyid_method'>method</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_path'>path</span> <span class='kw'>unless</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> 
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_api'>api</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_instance_data-instance_method">
  
    - (<tt>Object</tt>) <strong>before</strong>(&quot;clear data&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clear values onf instance variables before start.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 112</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span> 
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@format</span> <span class='op'>=</span> <span class='ivar'>@output</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_jsonp_callback-instance_method">
  
    - (<tt>Object</tt>) <strong>before</strong>('find callback name') 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Detects if request is using jQuery JSON-P and sets @callback variable.
@callback variable is used if after method and prepends JSON data with
callback function name.</p>

<h1>Example</h1>

<p>GET /_api?callback=jQuery12313123123 # @callback == jQuery12313123123</p>

<p>JSONP support is based on the code from <tt>sinatra/jsonp</tt> Gem <a
href="https://github.com/shtirlic/sinatra-jsonp">github.com/shtirlic/sinatra-jsonp</a>.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 184</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='ivar'>@format</span> <span class='op'>==</span> <span class='symbol'>:json</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>callback</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>jscallback</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>jsonp</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>jsoncallback</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
      <span class='ivar'>@callback</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@callback</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_1_object-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(&quot;/_objects/:type/:name&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get single Nagios object.</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p>none</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Type is one of Nagios objects like  hosts, hostgroupsroups, etc.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>HTTP response. Hash formatted in the format defined by requested output
type(XML, YAML or JSON).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/objects.rb', line 58</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_objects/:type/:name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@objects</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_api-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(/_api)) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provide information about API routes</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 246</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_api</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> 
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_api'>api</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_config-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(&quot;/_config&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get Nagios configuration.</p>

<p>Get Nagios configuration hash form parsing main Nagios configuration file
nagios.cfg</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>HTTP response. Hash formatted in the format defined by requested output
type(XML, YAML or JSON).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/config.rb', line 19</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_config</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_object_type-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(&quot;/_objects/:type&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all objects of type :type</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_list</tt> : Short list of available objects, depending on the current
request context: hosts, services, etc.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Type is one of Nagios objects like  hosts, hostgroupsroups, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>HTTP response. Hash formatted in the format defined by requested output
type(XML, YAML or JSON).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/objects.rb', line 36</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_objects/:type</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@objects</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='kw'>if</span> <span class='ivar'>@output</span> <span class='op'>==</span> <span class='symbol'>:list</span>
  <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_objects-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(&quot;/_objects&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get full list of Nagios objects. Returns hash containing all configured
objects in Nagios: hosts, hostgroups, services, contacts. etc.</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_list</tt> : Short list of available objects, depending on the current
request context: hosts, services, etc.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>HTTP response. Hash formatted in the format defined by requested output
type(XML, YAML or JSON).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/objects.rb', line 16</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_objects</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='kw'>begin</span>
            <span class='ivar'>@output</span> <span class='op'>==</span> <span class='symbol'>:list</span> <span class='op'>?</span> <span class='ivar'>@objects</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='op'>:</span> <span class='ivar'>@objects</span>
          <span class='kw'>rescue</span> <span class='const'>NoMethodError</span> 
            <span class='kw'>nil</span>
          <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_slash-instance_method">
  
    - (<tt>Object</tt>) <strong>get</strong>(/)) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns application information: name, version, github repository.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 255</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:application</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='comma'>,</span>
    <span class='symbol'>:version</span> <span class='op'>=&gt;</span> <span class='const'>VERSION</span><span class='comma'>,</span>
    <span class='symbol'>:source</span> <span class='op'>=&gt;</span> <span class='const'>GITHUB</span><span class='comma'>,</span>
    <span class='symbol'>:apiUrl</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_api</span><span class='tstring_end'>&quot;</span></span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_status-instance_method">
  
    - (<tt>Object</tt>) <strong>get_status</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>All hosts status. If no output modifier provided,</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_state</tt> - Instead of full status information send only current
state. For hosts up/down, for services OK, Warn, Critical, Unknown
(0,1,2-1)</p>
</li><li>
<p><tt>/_list</tt> : Short list of available objects, depending on the current
request context: hosts, services, etc.</p>
</li><li>
<p><tt>/_full</tt> - Show full status information. When used in 
/_status/_full call will display full hoststaus and  servicestatus
information for each host.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/status.rb', line 81</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>case</span> <span class='ivar'>@output</span> 
  <span class='kw'>when</span> <span class='symbol'>:state</span>
    <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='ivar'>@data</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hoststatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>host_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current_state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>when</span> <span class='symbol'>:list</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>when</span> <span class='symbol'>:full</span>
    <span class='ivar'>@data</span>
  <span class='kw'>else</span>
    <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='ivar'>@data</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hoststatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_status_hostname-instance_method">
  
    - (<tt>Object</tt>) <strong>get_status_hostname</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hoststatus for single host</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_state</tt> - Instead of full status information send only current
state. For hosts up/down, for services OK, Warn, Critical, Unknown
(0,1,2-1)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:hostname</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Configured Nagios hostname</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/status.rb', line 61</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status/:hostname</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hostname'>hostname</span><span class='op'>|</span>
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='lbracket'>[</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hoststatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>

  <span class='kw'>if</span> <span class='ivar'>@output</span> <span class='op'>==</span> <span class='symbol'>:state</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>host_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current_state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_status_hostname_services-instance_method">
  
    - (<tt>Object</tt>) <strong>get_status_hostname_services</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>All services for single host.</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_state</tt> - Instead of full status information send only current
state. For hosts up/down, for services OK, Warn, Critical, Unknown
(0,1,2-1)</p>
</li><li>
<p><tt>/_list</tt> : Short list of available objects, depending on the current
request context: hosts, services, etc.</p>
</li><li>
<p><tt>/_full</tt> - Show full status information. When used in 
/_status/_full call will display full hoststaus and  servicestatus
information for each host.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:hostname</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Configured Nagios hostname</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/status.rb', line 38</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status/:hostname/_services</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hostname'>hostname</span><span class='op'>|</span>

  <span class='kw'>case</span> <span class='ivar'>@output</span>
  <span class='kw'>when</span> <span class='symbol'>:list</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='lbracket'>[</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>servicestatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>when</span> <span class='symbol'>:state</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='ivar'>@data</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>host_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service_description</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current_state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='lbracket'>[</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>servicestatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_status_hostname_services_service_name-instance_method">
  
    - (<tt>Object</tt>) <strong>get_status_hostname_services_service_name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Full or short status information for single service on single host.</p>

<p><b>Accepted output type modifiers:</b></p>
<ul><li>
<p><tt>/_state</tt> - Instead of full status information send only current
state. For hosts up/down, for services OK, Warn, Critical, Unknown
(0,1,2-1)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:hostname</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Configured Nagios hostname</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:service_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Configured Nagios service for the host</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/get/status.rb', line 18</span>

<span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status/:hostname/_services/:service_name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span><span class='id identifier rubyid_service'>service</span><span class='op'>|</span>

  <span class='kw'>if</span> <span class='ivar'>@output</span> <span class='op'>==</span> <span class='symbol'>:state</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='lbracket'>[</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>servicestatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_service'>service</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice'>slice</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hostname</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service_description</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current_state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@data</span> <span class='op'>=</span> <span class='ivar'>@status</span><span class='lbracket'>[</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>servicestatus</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_service'>service</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="object_not_found-instance_method">
  
    - (<tt>Object</tt>) <strong>after</strong>(&quot;Object not found or bad request&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If result-set of object/status search is empty return HTTP 404 . This can
happen when you are requesting status for not existing host and/or service.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 201</span>

<span class='id identifier rubyid_after'>after</span> <span class='kw'>do</span>
  <span class='comment'># return unless request[&quot;REQUEST_METHOD&quot;] == 'PUT'
</span>  <span class='kw'>if</span> <span class='op'>!</span> <span class='ivar'>@data</span> <span class='op'>||</span> <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_halt'>halt</span> <span class='lbracket'>[</span><span class='int'>404</span><span class='comma'>,</span> <span class='lbrace'>{</span>
            <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Object not found or bad request</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> 
            <span class='symbol'>:error</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP::Notfound</span><span class='tstring_end'>&quot;</span></span>
          <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>to_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
         <span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_input_data-instance_method">
  
    - (<tt>Array</tt>) <strong>before</strong>(&quot;Parse PUT request body&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Process the data before on each HTTP request.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>@input Sets @input instance variable.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15
16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put.rb', line 10</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span> 
  <span class='kw'>if</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_put?'>put?</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span>
    <span class='ivar'>@input</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='ivar'>@format</span>
            <span class='kw'>when</span> <span class='symbol'>:json</span> <span class='kw'>then</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span>    <span class='id identifier rubyid_data'>data</span>
            <span class='kw'>when</span> <span class='symbol'>:xml</span>  <span class='kw'>then</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_from_xml'>from_xml</span> <span class='id identifier rubyid_data'>data</span>
            <span class='kw'>when</span> <span class='symbol'>:yaml</span> <span class='kw'>then</span> <span class='const'>YAML</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span>     <span class='id identifier rubyid_data'>data</span>
            <span class='kw'>end</span>
    <span class='comment'># Make sure we always return an Array
</span>    <span class='ivar'>@input</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@input</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='ivar'>@input</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_nagios_files-instance_method">
  
    - (<tt>Object</tt>) <strong>before</strong>(&quot;Parse Nagios files&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parse nagios files.</p>

<p>Note: *.parse methods are monkey-patched here (if you have required
'lib/nagira' above) to set min parsing interval to avoid file paring on
each HTTP request. File is parsed only if it was changed and if it was
parsed more then 60 (default) seconds ago. See
<tt>lib/nagira/timed_parse.rb</tt> for mor more info.</p>

<p>In development mode use files located under <tt>./test/data</tt> directory.
This allows to do development on the host where Nagios is notinstalled. If
you want to change this edit configuration in config/environment.rb file.</p>

<p>See also comments in config/default.rb file regarding nagios_cfg,
status_cfg, objects_cfg.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 80</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span> 

  <span class='gvar'>$nagios</span> <span class='op'>||=</span> <span class='lbrace'>{</span> <span class='symbol'>:config</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:objects</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span> <span class='rbrace'>}</span>
  
  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>  <span class='op'>||=</span> <span class='const'>Nagios</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_nagios_cfg'>nagios_cfg</span>
  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span>

  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span>  <span class='op'>||=</span> <span class='const'>Nagios</span><span class='op'>::</span><span class='const'>Status</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>  <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_status_cfg'>status_cfg</span> <span class='op'>||</span> 
                                             <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_status_file'>status_file</span>
                                             <span class='rparen'>)</span>
  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:objects</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Nagios</span><span class='op'>::</span><span class='const'>Objects</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span> <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_objects_cfg'>objects_cfg</span> <span class='op'>||</span> 
                                             <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_object_cache_file'>object_cache_file</span>
                                             <span class='rparen'>)</span>

  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:commands</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Nagios</span><span class='op'>::</span><span class='const'>ExternalCommands</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span> <span class='const'>Nagira</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_command_file'>command_file</span> <span class='op'>||</span> 
                                                       <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_command_file'>command_file</span>
                                                      <span class='rparen'>)</span>
  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span>
  <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:objects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span>

  <span class='ivar'>@status</span>   <span class='op'>=</span> <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hosts</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@objects</span>  <span class='op'>=</span> <span class='gvar'>$nagios</span><span class='lbracket'>[</span><span class='symbol'>:objects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_objects'>objects</span>


<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put__host_status_host_name-instance_method">
  
    - (<tt>Object</tt>) <strong>put</strong>(&quot;/_host_status/:host_name&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Same as /_status/:host_name (Not implemented)</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put/status.rb', line 45</span>

<span class='id identifier rubyid_put'>put</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_host_status/:host_name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> 
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Not implemented: TODO</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_status-instance_method">
  
    - (<tt>Object</tt>) <strong>put</strong>(&quot;/_status&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Submit JSON Hash for multiple services,  on multiple hosts.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put/status.rb', line 8</span>

<span class='id identifier rubyid_put'>put</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TODO: Not implemented</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_status_as_http_parms-instance_method">
  
    - (<tt>Object</tt>) <strong>put</strong>(/_status/:host_name/_services/:service_description/_return_code/:return_code/_plugin_output/:plugin_output) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update single service status on a single host. Use data provided in RESTful
path as parameters.</p>

<h2>Example</h2>

<pre class="code ruby"><code>curl  -d &quot;test data&quot; \
  -X PUT http://localhost:4567/_status/viy/_services/PING/_return_code/0/_plugin_output/OK
 # =&gt; ok</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put/status.rb', line 117</span>

<span class='id identifier rubyid_put'>put</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status/:host_name/_services/:service_description/_return_code/:return_code/_plugin_output/:plugin_output</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> 

  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id identifier rubyid_update_service_status'>update_service_status</span> <span class='id identifier rubyid_params'>params</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put_status_host_name-instance_method">
  
    - (<tt>Object</tt>) <strong>put</strong>(&quot;/_status/:host_name&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update hoststatus information only for the given host. URL hostname always
override hostname given in the JSON file.</p>

<h2>Example</h2>

<pre class="code ruby"><code>$ curl -i -H &quot;Accept: application/json&quot; -d @host.json -X
    PUT http://localhost:4567/_status/svaroh

  =&gt; {&quot;status&quot;: true, &quot;object&quot;: [{&quot;data&quot;: {&quot;host_name&quot;:&quot;svaroh&quot;,
  &quot;status_code&quot;: &quot;0&quot;, &quot;plugin_output&quot;: &quot;ping OK&quot;, &quot;action&quot;:
  &quot;PROCESS_HOST_CHECK_RESULT&quot;}, &quot;result&quot;:true, &quot;messages&quot;: []}]}</code></pre>

<h2>Example JSON</h2>

<pre class="code ruby"><code>{
 &quot;status_code&quot;:&quot;0&quot;,
 &quot;plugin_output&quot; : &quot;ping OK&quot;
}</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put/status.rb', line 33</span>

<span class='id identifier rubyid_put'>put</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/_status/:host_name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id identifier rubyid_update_host_status'>update_host_status</span> <span class='ivar'>@input</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span>
                                                  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>host_name</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>host_name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
                                                <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_jsonp_data-instance_method">
  
    - (<tt>Object</tt>) <strong>after</strong>(&quot;Return formatted data&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If it's a JSON-P request, return its data with prepended @callback function
name. JSONP request is detected by <tt>before</tt> method.</p>

<p>If no callback paramete given, then simply return formatted data as XML,
JSON, or YAML in response body.</p>

<h1>Example</h1>

<pre class="code ruby"><code>$ curl  'http://localhost:4567/?callback=test'
    test([&quot;{\&quot;application\&quot;:\&quot;Nagira\&quot;,\&quot;version\&quot;:\&quot;0.1.3\&quot;,\&quot;url\&quot;:\&quot;http://dmytro.github.com/nagira/\&quot;}&quot;])</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 227</span>

<span class='id identifier rubyid_after'>after</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_body'>body</span><span class='lparen'>(</span> <span class='ivar'>@callback</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@callback</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='ivar'>@data</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>to_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="strip_extensions-instance_method">
  
    - (<tt>Object</tt>) <strong>before</strong>(&quot;detect format&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Detect and strip output format extension</p>

<p>Strip extension (@format) from HTTP route and set it as instance variable
@format. Valid formats are .xml, .json, .yaml. If format is not specified,
it is set to default format (Nagira.settings.format).</p>

<p>@format can be assigned one of the symbols: :xml, :json, :yaml.</p>

<h1>Examples</h1>

<pre class="code ruby"><code>GET /_objects              # =&gt; default format
GET /_objects.json         # =&gt; :json
GET /_status/_list.yaml    # =&gt; :yaml</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 136</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span> 
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_path_info'>path_info</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_format_extensions'>format_extensions</span><span class='rbrace'>}</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@format</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='backref'>$1</span> <span class='op'>||</span> <span class='id identifier rubyid_settings'>settings</span><span class='period'>.</span><span class='id identifier rubyid_format'>format</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_content_type'>content_type</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@format</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="strip_output_type-instance_method">
  
    - (<tt>Object</tt>) <strong>before</strong>('detect output mode') 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Detect output mode modifier</p>

<p>Detect and strip output type from HTTP route. Full list of output types is
<tt>:list</tt>, <tt>:state</tt> or <tt>:full</tt>, corresponding to
(+/list, <tt>/state</tt>, <tt>/full</tt> routes).</p>

<p>Output type defined by route modifier appended to the end of HTTP route. If
no output type specfied it is set to <tt>:full</tt>. Output mode can be
followed by format extension (<tt>.json</tt>, <tt>.xml</tt> or
<tt>.yaml</tt>).</p>

<h1>Examples</h1>

<pre class="code ruby"><code>GET /_objects/_list     # =&gt; :list
GET /_status/_state     # =&gt; :state
GET /_status/:hostname  # =&gt; :full
GET /_status            # =&gt; :normal</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 164</span>

<span class='id identifier rubyid_before'>before</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_path_info'>path_info</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/_(list|state|full)$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@output</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='backref'>$1</span> <span class='op'>||</span> <span class='symbol'>:normal</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_host_status-instance_method">
  
    - (<tt>Object</tt>) <strong>update_host_status</strong>(params) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Small helper to submit data to ::Nagios::ExternalCommands object. For host
status updates sends external command via ::Nagios::ExternalCommands.write
method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_host_status'>update_host_status</span> <span class='id identifier rubyid_params'>params</span>
  <span class='id identifier rubyid_put_update'>put_update</span> <span class='symbol'>:PROCESS_HOST_CHECK_RESULT</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_service_status-instance_method">
  
    - (<tt>Object</tt>) <strong>update_service_status</strong>(params) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Small helper to submit data to ::Nagios::ExternalCommands object. For
status updates sends external coond via ::Nagios::ExternalCommands.send
method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/routes/put.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_service_status'>update_service_status</span> <span class='id identifier rubyid_params'>params</span>
  <span class='id identifier rubyid_put_update'>put_update</span> <span class='symbol'>:PROCESS_SERVICE_CHECK_RESULT</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Oct  4 22:51:24 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.1 (ruby-1.9.3).
</div>

  </body>
</html>