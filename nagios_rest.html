<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="revisit-after" content="30 days"><meta name="robots" content="index, follow"><title>Nagios RESTful API (old) | restful | api | nagios | Dmytro Kovalov</title><meta name="description" content="This is implementation of RESTful Ruby-on-Rails service for Nagios monitoring system. It provides read-only access via Web service to Nagios hosts and services monitoring status.
"><meta name="keywords" content="restful,api,nagios,enterprise,monitoring,ruby,ruby-on-rails"/><meta name="revised" content="Dmytro Kovalov,  2011/08/01"/><meta name="author" content="Dmytro Kovalov"/><link rel="icon" href="/images/favicon.ico"><link href='http://fonts.googleapis.com/css?family=Noto+Sans&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Seymour+One&subset=latin,cyrillic' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Comfortaa&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Lobster&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Inconsolata:700' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/app-e4c2b9c81e41368c0fcc779280bd5530.css"> <script src="/assets/app-b80c4942bb62b4e63380a8693c39923c.js"></script><meta name="thefeedbackbutton" content="Github:ed4d541b3268b2dc5250684b57864d"> <script src="http://www.thefeedbackbutton.com/button.js"></script><style>#TheFeedbackButton{top:270px !important}</style><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-33505287-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><meta name="google-translate-customization" content="e5305daecdf84461-c504f9bf5024d6b1-gef663547868bd15e-10"></meta></head><body><div id="fb-root"></div> <script>!function(e,t,n){var c,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(c=e.createElement(t),c.id=n,c.src="//connect.facebook.net/en_US/all.js#xfbml=1",o.parentNode.insertBefore(c,o))}(document,"script","facebook-jssdk")</script> <script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div id="tiki-top"><table style="margin:0;padding:0" cellspacing="0" cellpadding="0" width="100%" columns="3"><tbody><tr style="padding:0;margin:0"><td style="width:120px;background-color:#D9A005;color:#8b0b04;font-wight:bold;text-align:right;padding:1em;padding-top:2em;border:0;border-right:10px solid #000"><p class="motto plus">Лупайте сю скалу...</p><p class='motto'>Іван Франко</p></td><td style="border:0"> <a href="http://yarylo.sytes.net/"><img align="right" border="0" src="/images/yarylo.png"></a> <br clear="all"><div id="top_bar_title"> <a href="http://yarylo.sytes.net/dmytro" style="color:#8B0B04">Уроки пані Маєш</a></div><div style="float:left"><div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true"></div><div align="right" class="g-plusone" data-size="medium"></div></div><div style="float:right;padding:5px"><div ><img height="14" width="14" src="/images/feed-icon-14x14.png"> <a href="rss.xml">RSS</a> | <a href="atom.xml">Atom</a></div></div></td><td style="border:0;border-left:10px solid #000;width:200px;background-color:#8B0B04"><p class="editdate" style="font-size:small;color:#D9A005;margin:5px;margin-top:100px;margin-right:80px"> 30 October 2013</p></td></tr></tbody></table></div><div id="tiki-mid"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td id="leftcolumn"><p id="preamble"><a class="top" href="/"><h1>TOP »</h1></a><p><div id='tag_cloud'> <a href="/tags.html#mac" title="mac" rel="7">mac</a> <a href="/tags.html#history" title="history" rel="7">history</a> <a href="/tags.html#solaris" title="solaris" rel="1">solaris</a> <a href="/tags.html#email" title="email" rel="2">email</a> <a href="/tags.html#sendmail" title="sendmail" rel="1">sendmail</a> <a href="/tags.html#cli" title="cli" rel="7">cli</a> <a href="/tags.html#nfs" title="nfs" rel="1">nfs</a> <a href="/tags.html#configuration" title="configuration" rel="12">configuration</a> <a href="/tags.html#interesting" title="interesting" rel="1">interesting</a> <a href="/tags.html#linux" title="linux" rel="6">linux</a> <a href="/tags.html#debian" title="debian" rel="4">debian</a> <a href="/tags.html#xwindow" title="xwindow" rel="1">xwindow</a> <a href="/tags.html#css" title="css" rel="3">css</a> <a href="/tags.html#disk" title="disk" rel="1">disk</a> <a href="/tags.html#books" title="books" rel="1">books</a> <a href="/tags.html#fun" title="fun" rel="1">fun</a> <a href="/tags.html#cobbler" title="cobbler" rel="1">cobbler</a> <a href="/tags.html#installation" title="installation" rel="3">installation</a> <a href="/tags.html#troubleshooting" title="troubleshooting" rel="2">troubleshooting</a> <a href="/tags.html#ntp" title="ntp" rel="1">ntp</a> <a href="/tags.html#environment" title="environment" rel="3">environment</a> <a href="/tags.html#perl" title="perl" rel="1">perl</a> <a href="/tags.html#request tracker" title="request tracker" rel="2">request tracker</a> <a href="/tags.html#ruby" title="ruby" rel="9">ruby</a> <a href="/tags.html#development" title="development" rel="3">development</a> <a href="/tags.html#gem" title="gem" rel="1">gem</a> <a href="/tags.html#nagios" title="nagios" rel="4">nagios</a> <a href="/tags.html#monitoring" title="monitoring" rel="4">monitoring</a> <a href="/tags.html#nagira" title="nagira" rel="4">nagira</a> <a href="/tags.html#ssh" title="ssh" rel="1">ssh</a> <a href="/tags.html#tmux" title="tmux" rel="2">tmux</a> <a href="/tags.html#tips" title="tips" rel="8">tips</a> <a href="/tags.html#unix" title="unix" rel="3">unix</a> <a href="/tags.html#shell" title="shell" rel="3">shell</a> <a href="/tags.html#zsh" title="zsh" rel="1">zsh</a> <a href="/tags.html#prompt" title="prompt" rel="1">prompt</a> <a href="/tags.html#RESTful API" title="RESTful API" rel="3">RESTful API</a> <a href="/tags.html#blog" title="blog" rel="16">blog</a> <a href="/tags.html#github" title="github" rel="2">github</a> <a href="/tags.html#jekyll" title="jekyll" rel="2">jekyll</a> <a href="/tags.html#chef" title="chef" rel="1">chef</a> <a href="/tags.html#capistrano" title="capistrano" rel="1">capistrano</a> <a href="/tags.html#deployment" title="deployment" rel="1">deployment</a> <a href="/tags.html#Japan" title="Japan" rel="13">Japan</a> <a href="/tags.html#Ukrainian" title="Ukrainian" rel="13">Ukrainian</a> <a href="/tags.html#travel" title="travel" rel="13">travel</a> <a href="/tags.html#culture" title="culture" rel="4">culture</a></div></p><h1 class="even">Selected projects <a style="float:right" href="/github.html"><b>See all » </b></a></h1><a href="/aws-deploy.html">AWS Deploy</a><a href="/banalize.html">Banalize: Bash static code analyzer</a><a href="/dbi-report-excel.html">DBIx::Report::Excel</a><a href="/dotfiles/index.html">Shell settings, AKA dotfiles</a><a href="/github_keys/index.html">Github keys</a><a href="/nagios_couchbase.html">Nagios Monitoring for Couchbase server</a><a href="/nagira/index.html">Nagira: RESTful API for Nagios</a><a href="/rfb.html">Ready For Business Automation system</a><a href="/rspec_normalized_hash/index.html">RSpec tests for Normalized Hash</a><a href="/Web-iPhoto/index.html">Web iPhoto</a><h1>Blog <a style="float:right" href="/posts.html"><b>All posts » </b></a></h1> <a href="/series/Lito_na_pivnochi_YAponiyi.html"> Series: Літо на півночі Японії</a><a href="/2013/08/13/more_about_jekyll.html">Github & Jekyll: More experience with Jekyll and setup changes</a><a href="/2013/05/21/easy_spawn_new_hosts_with_capistrano.html">Build new hosts with Capistrano and Chef </a><a href="/2013/05/15/custom_css_for_rt4.html">Request Tracker: More about custom CSS for RT4</a><a href="/2013/03/18/ruby_2_test_drive.html">Ruby 2 test drive </a><a href="/2013/03/15/nagira_v0.2.5_release.html">Nagira v0.2.5 release </a><a href="/2013/03/13/its_unix_my_dear_watson.html">It's UNIX my dear Watson </a><a href="/2013/01/08/memorizable_password_generation.html">Memorizable password generation </a><a href="/2012/12/22/jekyll-tags-pygmnents.html">Github & Jekyll: New tricks and questions with Jekyll</a><a href="/2012/12/14/monitoring-patterns-II.html">Monitoring patterns fo...: Nagios Checks Aggregation</a><a href="/2012/12/12/monitoring-patterns-I.html">Monitoring patterns fo...: Monitoring Applications with RESTful API</a><a href="/2012/11/27/unobtrusive-git-prompt.html">Unobtrusive Git prompt for ZSH </a><h1 class="even">Slides <a style="float:right" href="/presentations"><b>See all » </b></a></h1> <a href=/ presentations/ nagira_tlug. html>Nagira @TLUG, 2012</a><a href=/ presentations/ rspec_and_guard. html>Rspec and Guard</a><h1>About</h1><a href="http://uk.wikipedia.org/wiki/%D0%AF%D1%80%D0%B8%D0%BB%D0%BE">Ярило, Yarylo, Jarilo</a> <a href="http://github.com/dmytro"> @ github</a> <a href="http://search.cpan.org/~dmytro"> @ CPAN</a> <a href="http://tinyurl.com/7j89dhl"> Dmytro (CV)</a><p><p></td><td id="centercolumn"><div class="wikitext"><div class="titlebar"> Nagios RESTful API (old)</div><div id="google_translate_element"></div><script>function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"en,ja,uk",layout:google.translate.TranslateElement.InlineLayout.SIMPLE,multilanguagePage:!0,gaTrack:!0,gaId:"UA-33505287-1"},"google_translate_element")}</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script><script>function createTOC(a,t){var e=0,n=$("<ul id='bookmarksList'>");$("#content").children(a).each(function(){$(this).html("<a name='bookmark"+e+"'></a>"+$(this).html()),n.append($("<li class='"+this.nodeName+"'><a href='#bookmark"+e++ +"'>"+$(this).text()+"</a></li>"))}),$("#"+t).append(n)}$("document").ready(function(){createTOC("h1,h2,h3,h4","TOC   ")})</script><style>#TOC.bookmarkList li{list-style-type:none}li:first-child{text-indent:0}.H1,.H2,.H3,.H4,.H5,.H6{display:block}.H1{text-indent:0;font-size:100%}.H2{text-indent:2ex;font-size:90%}.H3{text-indent:4ex;font-size:80%}.H4{text-indent:6ex;font-size:70%}.H5{text-indent:8ex;font-size:60%}.H6{text-indent:10ex;font-size:50%}</style><strong id="toc_title">Table Of Contents</strong><div id="TOC"></div><div id="content"><script>function createTOC(a,t){var e=0,n=$("<ul id='bookmarksList'>");$("#content").children(a).each(function(){$(this).html("<a name='bookmark"+e+"'></a>"+$(this).html()),n.append($("<li class='"+this.nodeName+"'><a href='#bookmark"+e++ +"'>"+$(this).text()+"</a></li>"))}),$("#"+t).append(n)}$("document").ready(function(){createTOC("h1,h2,h3,h4","TOC   ")})</script><style>
#<span class="caps">TOC</span>.bookmarkList li { list-style-type: none; }
li:first-child { text-indent: 0; }

.H1, .H2, .H3, .H4, .H5, .H6 {  display: block; }
.H1 { text-indent: 0; font-size: 100%; }
.H2 { text-indent: 2ex; font-size: 90%; }
.H3 { text-indent: 4ex; font-size: 80%; }
.H4 { text-indent: 6ex; font-size: 70%; }
.H5 { text-indent: 8ex; font-size: 60%; }
.H6 { text-indent: 10ex; font-size: 50%; }
</style><p><strong id="toc_title"></strong><br/><div id="TOC"></div></p> <strong>Please note</strong><p>There’s is different Open Source implementation of the RESTful <span class="caps">API</span> for Nagios, which superseeds this — <a href="http://dmytro.github.com/nagira">Nagira</a> . Nagira implemented with Ruby and Sinatra, provides more functionality/test suite, easier configuration.</p><p>Although similar in functionality code bases of two systems are not related.</p><p>This page only gives description of older <span class="caps">API</span>, if you are looking for working software look at <a href="http://dmytro.github.com/nagira">Nagira</a> instead. Source code for described here <span class="caps">API</span> is not available.</p><h1>Description</h1><p>This is implementation of RESTful Ruby-on-Rails service for Nagios monitoring system. It provides read-only access via Web service to Nagios hosts and services monitoring status.</p><p>This is a ‘faceless’ web application, i.e. it does not have Web <span class="caps">GUI</span> suitable for human use. It is intended to be used as data source for other web-applications and/or scripts.</p><h2>Routes</h2><p>Following routes and actions implemented in hosts controller:</p> <pre>
         root  /(.:format)                                      {:controller=&gt;"hosts", :action=&gt;"index"}
   hosts_list  /hosts/list(.:format)                            {:controller=&gt;"hosts", :action=&gt;"list"}
        hosts  /hosts(.:format)                                 {:controller=&gt;"hosts", :action=&gt;"index"}
 hosts_states  /hosts/states(.:format)                          {:controller=&gt;"hosts", :action=&gt;"states"}
               /host/:hostname(.:format)                        {:controller=&gt;"hosts", :action=&gt;"show"}
               /host/:hostname/:action(.:format)                {:action=&gt;/(show|state|services)/, :controller=&gt;"hosts"}
               /host/:hostname/services/state(.:format)         {:controller=&gt;"hosts", :action=&gt;"services_states"}
               /host/:hostname/services/list(.:format)          {:controller=&gt;"hosts", :action=&gt;"services_list"}
               /host/:hostname/service/:service(.:format)       {:controller=&gt;"hosts", :action=&gt;"service"}
               /host/:hostname/service/:service/state(.:format) {:controller=&gt;"hosts", :action=&gt;"service_state"}
‘Catch-all’ route for routing errors

               /*a(.:format)                                    {:controller=&gt;"application", :action=&gt;"routing"}</pre><h2>Programming language</h2><ul><li>Ruby</li><li>Ruby on Rails</li></ul><h2>Formats</h2><p>Hosts controller provides data in 3 formats: <span class="caps">XML</span> (.xml or empty), <span class="caps">JSON</span> (.json) or <span class="caps">YAML</span> (.yaml)</p><p>No <span class="caps">HTML</span> formatted output is provided.</p><h2>Examples</h2><ul><li>Get list of all hosts</li></ul> <pre>
   curl http://localhost:3000/hosts/list</pre><ul><li>Get information of all hosts’ status (full status)</li></ul> <pre>
   curl http://localhost:3000/hosts</pre><ul><li>Get information of all hosts’ status (hostname and state only)</li></ul> <pre>
   curl http://localhost:3000/hosts/states</pre><ul><li>Get single host’s information in <span class="caps">XML</span>, <span class="caps">YAML</span> and <span class="caps">JSON</span> respectively</li></ul> <pre>
   curl http://localhost:3000/host/production001
   curl http://localhost:3000/host/production001.yaml
   curl http://localhost:3000/host/production001.json</pre><ul><li>Get services on the host in <span class="caps">XML</span> and <span class="caps">YAML</span></li></ul> <pre>
  curl http://localhost:3000/host/production001/services
  curl http://localhost:3000/host/production001/services.xml (same as above)
  curl http://localhost:3000/host/production001/services.yaml</pre><ul><li>List of services on the host</li></ul> <pre>
  curl http://localhost:3000/host/production001/services/list
  curl http://localhost:3000/host/production001/services/list.json
  curl http://localhost:3000/host/production001/services/list.yaml</pre><h2>Configuration</h2><p>Nagios RESTful assumes that Nagios configuration file is located in /etc/nagios/nagios.cfg and finds information about status.dat file location from this file. If your Nagios configuration is in different location please change it in config/application.rb (or in one of config/environments/*) files(s).</p></div></table><div id="tiki-bot"><table style="border-:0;border-top:10px solid #000;margin:0;padding:0" cellspacing="0" cellpadding="0" width="100%" columns="2"><tbody><tr style="padding:0;margin:0"><td style="width:80%;background-color:#052D6C;color:#8b0b04;font-style:italic;font-wight:bold;text-align:right;border:0"> <br clear="all"><br clear="all"><br clear="all"><br clear="all"></td><td style="border:0;border-left:10px solid #000;width:120px;padding:5px"> <a class="address" href="mailto:dmytro.kovalov@gmail.com">дмитро ковальов</a></br> <a class="address" href="https://dmytro.github.com/">dmytro @ github </a><br> <a class="address" href="http://dmytro.sytes.net">dmytro.sytes.net</a><br></td></tr></tbody></table></div> <script>$("#content table tr:even").attr("class","even")</script></body></html>